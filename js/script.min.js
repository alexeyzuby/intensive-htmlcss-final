var modal=document.querySelector(".modal"),modalClose=modal.querySelector(".modal__close"),callback=document.querySelector(".callback-form"),callbackLink=document.querySelector(".map__button"),callbackName=callback.querySelector('[name="name"]'),callbackEmail=callback.querySelector('[name="email"]'),callbackRequired=[callbackName,callbackEmail],sliderDots=document.querySelectorAll(".welcome-slider__dot"),sliderItems=document.querySelectorAll(".welcome-slider__item"),openModal=function(e){e.preventDefault(),modal.classList.add("modal_open"),callbackName.focus(),window.addEventListener("keydown",onEscClick)},closeModal=function(e){e.preventDefault(),modal.classList.remove("modal_open"),modal.classList.remove("modal_error"),window.removeEventListener("keydown",onEscClick)},submitForm=function(e){callbackName.value&&callbackEmail.value||(e.preventDefault(),modal.classList.remove("modal_error"),modal.offsetWidth=modal.offsetWidth,modal.classList.add("modal_error")),callbackRequired.forEach(function(e){e.value?e.classList.contains("error")&&e.classList.remove("error"):e.classList.add("error")})},onEscClick=function(e){27===e.keyCode&&(e.preventDefault(),modal.classList.remove("modal_open"),modal.classList.remove("modal_error"),window.removeEventListener("keydown",onEscClick))};callbackLink.addEventListener("click",openModal),modalClose.addEventListener("click",closeModal),callback.addEventListener("submit",submitForm),sliderDots.forEach(function(l,a){l.dataset.id=a,l.addEventListener("click",function(e){sliderItems.forEach(function(e){e.style.display="none"}),sliderDots.forEach(function(e){e.classList.remove("welcome-slider__dot_active")}),sliderItems[l.dataset.id].style.display="block",sliderDots[a].classList.add("welcome-slider__dot_active")})});